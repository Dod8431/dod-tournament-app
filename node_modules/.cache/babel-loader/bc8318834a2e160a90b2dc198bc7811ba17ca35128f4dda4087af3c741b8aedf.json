{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\doria\\\\dod-tournament-app\\\\src\\\\components\\\\VotingPanel.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { listenTournament, submitVote } from '../firebase/firestore';\nimport FaceOffPanel from './FaceOffPanel';\nimport { saveUserProgress, loadUserProgress } from \"../firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst bgClass = \"bg-[var(--main-bg)]\";\nconst accentText = \"text-[var(--main-gold)]\";\nconst errorText = \"text-[#ff6f91]\";\nconst borderClass = \"border-4 border-[var(--main-gold-dark)]\";\nfunction VotingPanel() {\n  _s();\n  var _tournament$videos, _tournament$videos$fi, _tournament$videos2, _tournament$videos2$f;\n  const {\n    tid\n  } = useParams();\n  const [tournament, setTournament] = useState(null);\n  const [matches, setMatches] = useState([]);\n  const [currentIdx, setCurrentIdx] = useState(0);\n  const [selected, setSelected] = useState({});\n  const [voted, setVoted] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [voteRegistered, setVoteRegistered] = useState(false);\n  const [currentVote, setCurrentVote] = useState(null);\n  const navigate = useNavigate();\n  let user = null;\n  try {\n    user = JSON.parse(localStorage.getItem(`tourn_${tid}_user`));\n  } catch (e) {}\n  useEffect(() => {\n    if (!user) {\n      navigate(`/tournament/${tid}/join`);\n      return;\n    }\n    const unsub = listenTournament(tid, async data => {\n      var _data$bracket, _data$bracket$find;\n      console.log(\">>> Tournament data loaded\", data);\n      setTournament(data);\n      setLoading(false);\n      const round = data.currentRound;\n      const rBracket = (_data$bracket = data.bracket) === null || _data$bracket === void 0 ? void 0 : (_data$bracket$find = _data$bracket.find) === null || _data$bracket$find === void 0 ? void 0 : _data$bracket$find.call(_data$bracket, r => r.round === round);\n      setMatches(rBracket ? rBracket.matches : []);\n\n      // Charger progression utilisateur\n      const progress = await loadUserProgress(user.userId, tid);\n      console.log(\">>> Loaded progress from Firestore\", progress);\n      if (progress) {\n        console.log(\">>> Restoring state from progress\", progress);\n        setCurrentIdx(progress.currentMatch || 0);\n        setSelected(progress.selected || {});\n      }\n    });\n    return () => unsub && unsub();\n    // eslint-disable-next-line\n  }, [tid]);\n  useEffect(() => {\n    setVoteRegistered(false);\n    setCurrentVote(null);\n  }, [currentIdx]);\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `min-h-screen flex justify-center items-center ${bgClass} ${accentText} text-xl`,\n      children: \"Redirecting...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this);\n  }\n  if (loading || !tournament) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `min-h-screen flex justify-center items-center ${bgClass}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `px-8 py-6 rounded-2xl font-bold text-2xl animate-fade-in ${accentText} ${borderClass} shadow-lg`,\n        children: \"Loading Tournament...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this);\n  }\n  if (!Array.isArray(matches) || matches.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `min-h-screen flex justify-center items-center ${bgClass}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `px-8 py-6 rounded-2xl font-bold text-2xl ${accentText} ${borderClass} shadow-lg`,\n        children: \"No matches available for voting in this round.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  }\n  if (voted) {\n    setTimeout(() => navigate(`/tournament/${tid}/recap`), 1200);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `min-h-screen flex justify-center items-center ${bgClass}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-fade-in-up px-8 py-6 rounded-2xl font-black text-3xl text-[var(--main-gold)] border-4 border-[var(--main-gold-dark)] shadow-2xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Round submitted!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-lg font-normal mt-2 text-[var(--main-gold-dark)] opacity-70\",\n          children: \"Loading recap...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this);\n  }\n  const match = matches[currentIdx];\n  if (!match) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `min-h-screen flex justify-center items-center ${bgClass}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `px-8 py-6 rounded-2xl font-bold text-2xl ${errorText} border-4 border-[#ff99ba]`,\n        children: \"No match data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this);\n  }\n  const videoA = (_tournament$videos = tournament.videos) === null || _tournament$videos === void 0 ? void 0 : (_tournament$videos$fi = _tournament$videos.find) === null || _tournament$videos$fi === void 0 ? void 0 : _tournament$videos$fi.call(_tournament$videos, v => v.id === match.videoAId);\n  const videoB = (_tournament$videos2 = tournament.videos) === null || _tournament$videos2 === void 0 ? void 0 : (_tournament$videos2$f = _tournament$videos2.find) === null || _tournament$videos2$f === void 0 ? void 0 : _tournament$videos2$f.call(_tournament$videos2, v => v.id === match.videoBId);\n  if (!videoA || !videoB) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `min-h-screen flex justify-center items-center ${bgClass}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `px-8 py-6 rounded-2xl font-bold text-2xl ${errorText} border-4 border-[#ff99ba]`,\n        children: \"Video data missing\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this);\n  }\n  const handleVote = side => {\n    const votedVideoId = side === \"A\" ? videoA.id : videoB.id;\n    if (!voteRegistered) {\n      console.log(\">>> Submitting vote\", {\n        matchId: match.id,\n        votedVideoId\n      });\n      submitVote(tid, user.userId, tournament.currentRound, match.id, votedVideoId);\n      const newSelected = {\n        ...selected,\n        [match.id]: votedVideoId\n      };\n      setSelected(newSelected);\n      setVoteRegistered(true);\n      setCurrentVote(side);\n      saveUserProgress(user.userId, tid, {\n        currentRound: tournament.currentRound,\n        currentMatch: currentIdx,\n        selected: newSelected\n      });\n    }\n  };\n  const handleNextMatch = () => {\n    if (currentIdx < matches.length - 1) {\n      const newIdx = currentIdx + 1;\n      console.log(\">>> Moving to next match\", newIdx);\n      setCurrentIdx(newIdx);\n      saveUserProgress(user.userId, tid, {\n        currentRound: tournament.currentRound,\n        currentMatch: newIdx,\n        selected\n      });\n    } else {\n      console.log(\">>> All matches done, submitting round\");\n      setVoted(true);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `min-h-screen w-full ${bgClass} flex items-center justify-center`,\n    children: /*#__PURE__*/_jsxDEV(FaceOffPanel, {\n      videoA: videoA,\n      videoB: videoB,\n      revealedA: !!selected[`${currentIdx}_A_revealed`],\n      revealedB: !!selected[`${currentIdx}_B_revealed`],\n      onRevealA: () => {\n        const newSelected = {\n          ...selected,\n          [`${currentIdx}_A_revealed`]: true\n        };\n        setSelected(newSelected);\n        console.log(\">>> Revealed A\", newSelected);\n        saveUserProgress(user.userId, tid, {\n          currentRound: tournament.currentRound,\n          currentMatch: currentIdx,\n          selected: newSelected\n        });\n      },\n      onRevealB: () => {\n        const newSelected = {\n          ...selected,\n          [`${currentIdx}_B_revealed`]: true\n        };\n        setSelected(newSelected);\n        console.log(\">>> Revealed B\", newSelected);\n        saveUserProgress(user.userId, tid, {\n          currentRound: tournament.currentRound,\n          currentMatch: currentIdx,\n          selected: newSelected\n        });\n      },\n      onVote: handleVote,\n      voteRegistered: voteRegistered,\n      votedFor: currentVote,\n      onNextMatch: handleNextMatch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 162,\n    columnNumber: 5\n  }, this);\n}\n_s(VotingPanel, \"1BZwGwjJAAhLLE8y4qliL+CnP4E=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = VotingPanel;\nexport default VotingPanel;\nvar _c;\n$RefreshReg$(_c, \"VotingPanel\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","listenTournament","submitVote","FaceOffPanel","saveUserProgress","loadUserProgress","jsxDEV","_jsxDEV","bgClass","accentText","errorText","borderClass","VotingPanel","_s","_tournament$videos","_tournament$videos$fi","_tournament$videos2","_tournament$videos2$f","tid","tournament","setTournament","matches","setMatches","currentIdx","setCurrentIdx","selected","setSelected","voted","setVoted","loading","setLoading","voteRegistered","setVoteRegistered","currentVote","setCurrentVote","navigate","user","JSON","parse","localStorage","getItem","e","unsub","data","_data$bracket","_data$bracket$find","console","log","round","currentRound","rBracket","bracket","find","call","r","progress","userId","currentMatch","className","children","fileName","_jsxFileName","lineNumber","columnNumber","Array","isArray","length","setTimeout","match","videoA","videos","v","id","videoAId","videoB","videoBId","handleVote","side","votedVideoId","matchId","newSelected","handleNextMatch","newIdx","revealedA","revealedB","onRevealA","onRevealB","onVote","votedFor","onNextMatch","_c","$RefreshReg$"],"sources":["C:/Users/doria/dod-tournament-app/src/components/VotingPanel.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { listenTournament, submitVote } from '../firebase/firestore';\r\nimport FaceOffPanel from './FaceOffPanel';\r\nimport { saveUserProgress, loadUserProgress } from \"../firebase/firestore\";\r\n\r\nconst bgClass = \"bg-[var(--main-bg)]\";\r\nconst accentText = \"text-[var(--main-gold)]\";\r\nconst errorText = \"text-[#ff6f91]\";\r\nconst borderClass = \"border-4 border-[var(--main-gold-dark)]\";\r\n\r\nfunction VotingPanel() {\r\n  const { tid } = useParams();\r\n  const [tournament, setTournament] = useState(null);\r\n  const [matches, setMatches] = useState([]);\r\n  const [currentIdx, setCurrentIdx] = useState(0);\r\n  const [selected, setSelected] = useState({});\r\n  const [voted, setVoted] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [voteRegistered, setVoteRegistered] = useState(false);\r\n  const [currentVote, setCurrentVote] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  let user = null;\r\n  try {\r\n    user = JSON.parse(localStorage.getItem(`tourn_${tid}_user`));\r\n  } catch (e) {}\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      navigate(`/tournament/${tid}/join`);\r\n      return;\r\n    }\r\n    const unsub = listenTournament(tid, async (data) => {\r\n      console.log(\">>> Tournament data loaded\", data);\r\n\r\n      setTournament(data);\r\n      setLoading(false);\r\n\r\n      const round = data.currentRound;\r\n      const rBracket = data.bracket?.find?.(r => r.round === round);\r\n      setMatches(rBracket ? rBracket.matches : []);\r\n\r\n      // Charger progression utilisateur\r\n      const progress = await loadUserProgress(user.userId, tid);\r\n      console.log(\">>> Loaded progress from Firestore\", progress);\r\n\r\n      if (progress) {\r\n        console.log(\">>> Restoring state from progress\", progress);\r\n        setCurrentIdx(progress.currentMatch || 0);\r\n        setSelected(progress.selected || {});\r\n      }\r\n    });\r\n    return () => unsub && unsub();\r\n    // eslint-disable-next-line\r\n  }, [tid]);\r\n\r\n  useEffect(() => {\r\n    setVoteRegistered(false);\r\n    setCurrentVote(null);\r\n  }, [currentIdx]);\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className={`min-h-screen flex justify-center items-center ${bgClass} ${accentText} text-xl`}>\r\n        Redirecting...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loading || !tournament) {\r\n    return (\r\n      <div className={`min-h-screen flex justify-center items-center ${bgClass}`}>\r\n        <div className={`px-8 py-6 rounded-2xl font-bold text-2xl animate-fade-in ${accentText} ${borderClass} shadow-lg`}>\r\n          Loading Tournament...\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!Array.isArray(matches) || matches.length === 0) {\r\n    return (\r\n      <div className={`min-h-screen flex justify-center items-center ${bgClass}`}>\r\n        <div className={`px-8 py-6 rounded-2xl font-bold text-2xl ${accentText} ${borderClass} shadow-lg`}>\r\n          No matches available for voting in this round.\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (voted) {\r\n    setTimeout(() => navigate(`/tournament/${tid}/recap`), 1200);\r\n    return (\r\n      <div className={`min-h-screen flex justify-center items-center ${bgClass}`}>\r\n        <div className=\"animate-fade-in-up px-8 py-6 rounded-2xl font-black text-3xl text-[var(--main-gold)] border-4 border-[var(--main-gold-dark)] shadow-2xl\">\r\n          <span>Round submitted!</span>\r\n          <div className=\"text-lg font-normal mt-2 text-[var(--main-gold-dark)] opacity-70\">Loading recap...</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const match = matches[currentIdx];\r\n  if (!match) {\r\n    return (\r\n      <div className={`min-h-screen flex justify-center items-center ${bgClass}`}>\r\n        <div className={`px-8 py-6 rounded-2xl font-bold text-2xl ${errorText} border-4 border-[#ff99ba]`}>\r\n          No match data\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const videoA = tournament.videos?.find?.(v => v.id === match.videoAId);\r\n  const videoB = tournament.videos?.find?.(v => v.id === match.videoBId);\r\n\r\n  if (!videoA || !videoB) {\r\n    return (\r\n      <div className={`min-h-screen flex justify-center items-center ${bgClass}`}>\r\n        <div className={`px-8 py-6 rounded-2xl font-bold text-2xl ${errorText} border-4 border-[#ff99ba]`}>\r\n          Video data missing\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleVote = side => {\r\n    const votedVideoId = side === \"A\" ? videoA.id : videoB.id;\r\n    if (!voteRegistered) {\r\n      console.log(\">>> Submitting vote\", { matchId: match.id, votedVideoId });\r\n      submitVote(tid, user.userId, tournament.currentRound, match.id, votedVideoId);\r\n      const newSelected = { ...selected, [match.id]: votedVideoId };\r\n      setSelected(newSelected);\r\n      setVoteRegistered(true);\r\n      setCurrentVote(side);\r\n\r\n      saveUserProgress(user.userId, tid, {\r\n        currentRound: tournament.currentRound,\r\n        currentMatch: currentIdx,\r\n        selected: newSelected\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleNextMatch = () => {\r\n    if (currentIdx < matches.length - 1) {\r\n      const newIdx = currentIdx + 1;\r\n      console.log(\">>> Moving to next match\", newIdx);\r\n      setCurrentIdx(newIdx);\r\n      saveUserProgress(user.userId, tid, {\r\n        currentRound: tournament.currentRound,\r\n        currentMatch: newIdx,\r\n        selected\r\n      });\r\n    } else {\r\n      console.log(\">>> All matches done, submitting round\");\r\n      setVoted(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`min-h-screen w-full ${bgClass} flex items-center justify-center`}>\r\n      <FaceOffPanel\r\n        videoA={videoA}\r\n        videoB={videoB}\r\n        revealedA={!!selected[`${currentIdx}_A_revealed`]}\r\n        revealedB={!!selected[`${currentIdx}_B_revealed`]}\r\n        onRevealA={() => {\r\n          const newSelected = { ...selected, [`${currentIdx}_A_revealed`]: true };\r\n          setSelected(newSelected);\r\n          console.log(\">>> Revealed A\", newSelected);\r\n          saveUserProgress(user.userId, tid, {\r\n            currentRound: tournament.currentRound,\r\n            currentMatch: currentIdx,\r\n            selected: newSelected\r\n          });\r\n        }}\r\n        onRevealB={() => {\r\n          const newSelected = { ...selected, [`${currentIdx}_B_revealed`]: true };\r\n          setSelected(newSelected);\r\n          console.log(\">>> Revealed B\", newSelected);\r\n          saveUserProgress(user.userId, tid, {\r\n            currentRound: tournament.currentRound,\r\n            currentMatch: currentIdx,\r\n            selected: newSelected\r\n          });\r\n        }}\r\n        onVote={handleVote}\r\n        voteRegistered={voteRegistered}\r\n        votedFor={currentVote}\r\n        onNextMatch={handleNextMatch}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VotingPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}